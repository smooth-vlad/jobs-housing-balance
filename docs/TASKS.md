# –ó–∞–¥–∞—á–∏ –ø—Ä–æ–µ–∫—Ç–∞ MVP 1

## ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

### MVP: –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥–∞
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ (.csproj, AssemblyInfo)
- ‚úÖ –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (JobsHousingBalanceMod)
- ‚úÖ Harmony –ø–∞—Ç—á–∏ (HarmonyPatcher)
- ‚úÖ LoadingExtension (OnLevelLoaded/Unloading)
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∏–≥—Ä–µ

### Task 9: UI —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ **9.1**: –ö—Ä—É–≥–ª–∞—è –∫–Ω–æ–ø–∫–∞-–∏–∫–æ–Ω–∫–∞ (48x48px, –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º–∞—è)
- ‚úÖ **9.2**: –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –º—ã—à—å—é
- ‚úÖ **9.3**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤ (—Ä–∞–∑–ª–∏—á–µ–Ω–∏–µ –∫–ª–∏–∫/–¥—Ä–∞–≥)
- ‚úÖ **9.4**: UI –ø–∞–Ω–µ–ª—å (300x400px, —Ñ–æ–Ω, –∑–∞–≥–æ–ª–æ–≤–æ–∫, –∫–Ω–æ–ø–∫–∞ X)
- ‚úÖ **9.5**: Toggle-–ª–æ–≥–∏–∫–∞ –ø–æ–∫–∞–∑–∞/—Å–∫—Ä—ã—Ç–∏—è –ø–∞–Ω–µ–ª–∏
- ‚úÖ **9.6**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∫–Ω–æ–ø–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è
- ‚úÖ **9.7**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ LoadingExtension
- ‚úÖ **9.8**: –≠–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –ø–∞–Ω–µ–ª–∏

## ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

### –≠—Ç–∞–ø A - –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –∫–æ–Ω—Ç—É—Ä—ã
- ‚úÖ **A.1**: –î–æ—Ä–∞–±–æ—Ç–∫–∞ UI –∫–æ–Ω—Ç—Ä–æ–ª–æ–≤ –≤ MainPanel
  - ‚úÖ Mode dropdown: –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ "Hex" | "Districts"
  - ‚úÖ Hex size dropdown: –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ "64m" | "128m" | "256m" | "512m"
  - ‚úÖ Opacity slider: –∏—Å–ø—Ä–∞–≤–∏—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω –Ω–∞ 0.1-0.8
  - ‚úÖ Legend: –∑–∞–º–µ–Ω–∏—Ç—å placeholder –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
- ‚úÖ **A.2**: –°–æ–∑–¥–∞–Ω–∏–µ AppState –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚úÖ **A.3**: –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫–µ–ª–µ—Ç–∞ OverlayRenderer
- ‚úÖ **A.4**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è UI ‚Üî Overlay —á–µ—Ä–µ–∑ —Å–æ–±—ã—Ç–∏—è
- ‚úÖ **A.5**: –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è Legend —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —Ü–≤–µ—Ç–æ–≤

### –≠—Ç–∞–ø B - –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö (—Ñ–∞–∫—Ç)
- ‚úÖ **B.1**: –ò—Ç–µ—Ä–∞—Ü–∏—è –ø–æ –∑–¥–∞–Ω–∏—è–º –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–∞–∫—Ç–æ–≤
  - ‚úÖ –ü—Ä–æ—Ö–æ–¥ –ø–æ BuildingManager.m_buildings.m_buffer
  - ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω—ã—Ö –∑–¥–∞–Ω–∏–π –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ OutsideConnectionAI
  - ‚úÖ –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –∏–∑ CitizenUnits —Å —É—á–µ—Ç–æ–º —Ç–∏–ø–∞ –∑–¥–∞–Ω–∏—è
  - ‚úÖ –ü–æ–¥—Å—á–µ—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∑–∞–Ω—è—Ç—ã—Ö —Å–ª–æ—Ç–æ–≤ (–Ω–µ –µ–º–∫–æ—Å—Ç–µ–π)
- ‚úÖ **B.2**: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ ¬´–≥—Ä—è–∑–Ω—ã–µ¬ª —Ñ–ª–∞–≥–∏
  - ‚úÖ TTL-–∫—ç—à —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–æ–π
  - ‚úÖ –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ —Ç—Ä–∏–≥–≥–µ—Ä–∞–º –∏ –≤—Ä–µ–º–µ–Ω–∏
  - ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
- ‚úÖ **B.3**: –¢—Ä–∏–≥–≥–µ—Ä—ã –ø–µ—Ä–µ—Å—á—ë—Ç–∞
  - ‚úÖ –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞–∂–¥—ã–µ 256 –∫–∞–¥—Ä–æ–≤
  - ‚úÖ –°–æ–±—ã—Ç–∏–π–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã —á–µ—Ä–µ–∑ BuildingExtensionBase
  - ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ **B.4**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ —Å–≤—è–∑–∫–∏
  - ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OverlayManager
  - ‚úÖ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏
  - ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞
- ‚úÖ **B.5**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
  - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å Realistic Population 2
  - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (1.4ms –¥–ª—è 586 –∑–¥–∞–Ω–∏–π)
  - ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

**–§–∞–π–ª—ã**: `src/Data/Collector/*.cs`, `src/OverlayManager.cs`

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ –∑–∞–¥–∞—á–∏

### –≠—Ç–∞–ø C - –ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (–ü–õ–ê–ù–ò–†–£–ï–¢–°–Ø)
- [ ] **C.1**: Hex-–∞–≥—Ä–µ–≥–∞—Ü–∏—è
  - [ ] –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ worldPos ‚Üí hexId (Red Blob –∞–ª–≥–æ—Ä–∏—Ç–º—ã)
  - [ ] –°—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ residentsFact/jobsFact –ø–æ –≥–µ–∫—Å–∞–º
  - [ ] –†–∞—Å—á–µ—Ç –±–∞–ª–∞–Ω—Å–∞ Jobs/Housing –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≥–µ–∫—Å–∞
- [ ] **C.2**: District-–∞–≥—Ä–µ–≥–∞—Ü–∏—è
  - [ ] –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∑–¥–∞–Ω–∏–π –ø–æ districtId
  - [ ] –°—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ —Ä–∞–π–æ–Ω–∞–º
  - [ ] –†–∞—Å—á–µ—Ç –±–∞–ª–∞–Ω—Å–∞ –ø–æ —Ä–∞–π–æ–Ω–∞–º
- [ ] **C.3**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OverlayRenderer
  - [ ] –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  - [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è Hex/District —Ä–µ–∂–∏–º–æ–≤
- [ ] **C.4**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏
  - [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ hex-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
  - [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—É–º–º –ø–æ —Ä–∞–π–æ–Ω–∞–º

**–§–∞–π–ª—ã**: `src/Aggregation/Hex/*.cs`, `src/Aggregation/Districts/*.cs`

### –≠—Ç–∞–ø D - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è (–ü–õ–ê–ù–ò–†–£–ï–¢–°–Ø)
- [ ] **D.1**: Hex-–æ–≤–µ—Ä–ª–µ–π
  - [ ] –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≥–µ–∫—Å–æ–≤ —Å —Ü–≤–µ—Ç–æ–≤–æ–π —à–∫–∞–ª–æ–π
  - [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ –≥–µ–∫—Å–æ–≤ (64/128/256/512m)
  - [ ] –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
- [ ] **D.2**: District-–æ–≤–µ—Ä–ª–µ–π
  - [ ] –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Ä–∞–π–æ–Ω–æ–≤ —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π
  - [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ä–∞–π–æ–Ω–æ–≤
- [ ] **D.3**: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
  - [ ] Hover-—ç—Ñ—Ñ–µ–∫—Ç—ã —Å –ø–æ–∫–∞–∑–æ–º –¥–∞–Ω–Ω—ã—Ö
  - [ ] Click-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- [ ] **D.4**: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  - [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–Ω–¥–µ—Ä-–¥–∞–Ω–Ω—ã—Ö
  - [ ] LOD-—Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –±–æ–ª—å—à–∏—Ö –≥–æ—Ä–æ–¥–æ–≤

**–§–∞–π–ª—ã**: `src/Rendering/Overlay/*.cs`

### –≠—Ç–∞–ø E - UI –¥–æ—Ä–∞–±–æ—Ç–∫–∏ (–ü–õ–ê–ù–ò–†–£–ï–¢–°–Ø)
- [ ] **E.1**: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
  - [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–Ω–µ–ª–∏
  - [ ] –ì—Ä–∞—Ñ–∏–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞
- [ ] **E.2**: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
  - [ ] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø–∞–º –∑–¥–∞–Ω–∏–π
  - [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ü–≤–µ—Ç–æ–≤–æ–π —à–∫–∞–ª—ã
- [ ] **E.3**: –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
  - [ ] –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV/JSON
  - [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –æ–≤–µ—Ä–ª–µ—è
- [ ] **E.4**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
  - [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –∫–Ω–æ–ø–∫–∏
  - [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ UI

**–§–∞–π–ª—ã**: `src/UI/Panel/MainPanel.cs`, `src/Config/Settings.cs`


# –ó–∞–¥–∞—á–∏ –ø—Ä–æ–µ–∫—Ç–∞ –æ—Å–Ω–æ–≤–Ω—ã–µ
–æ—Ç–ª–∏—á–Ω–æ! –Ω–∏–∂–µ ‚Äî —á—ë—Ç–∫–∏–π, ¬´–¥–ª—è –¥—Ä—É–≥–æ–≥–æ –ò–ò¬ª –ø–ª–∞–Ω: —á—Ç–æ –∏ –≤ –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –¥–µ–ª–∞—Ç—å, –∫–∞–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ —Å—á–∏—Ç–∞—Ç—å ¬´–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏¬ª, –∫–∞–∫–∏–µ —Ç–æ–Ω–∫–æ—Å—Ç–∏ —É—á–µ—Å—Ç—å. –±–µ–∑ –∫–æ–¥–∞.

# Jobs‚ÄìHousing Balance ¬∑ –ü–ª–∞–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

## 0) –ö–æ—Ä–æ—Ç–∫–æ –æ —Ü–µ–ª–∏

–ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ¬†**–¥–∏—Å–±–∞–ª–∞–Ω—Å ‚Äú–∂–∏–ª—å—ë ‚Üî —Ä–∞–±–æ—á–∏–µ –º–µ—Å—Ç–∞‚Äù**:

- –∫—Ä–∞—Å–Ω—ã–π ‚Äî¬†**–Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ —Ä–∞–±–æ—á–∏—Ö –º–µ—Å—Ç**¬†(jobs < residents);
    
- —Å–∏–Ω–∏–π ‚Äî¬†**–Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ –∂–∏–ª—å—è**¬†(jobs > residents).  
    –î–≤–∞ —Ä–µ–∂–∏–º–∞ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏:¬†**Hex grid**¬†(–≥–µ–∫—Å–∞–≥–æ–Ω–∞–ª—å–Ω–∞—è —Å–µ—Ç–∫–∞) —Å –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—ã–º –º–∞—Å—à—Ç–∞–±–æ–º –∏¬†**Districts**¬†(–ø–æ —Ä–∞–π–æ–Ω–∞–º).  
    –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö ‚Äî —Ç–æ–ª—å–∫–æ¬†**—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞—Å–µ–ª–µ–Ω–∏–µ –∏ –∑–∞–Ω—è—Ç–æ—Å—Ç—å**¬†–≥—Ä–∞–∂–¥–∞–Ω, —á—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å¬†**Realistic Population**.
    

---

## 1) –û–±–ª–∞—Å—Ç—å —Ä–∞–±–æ—Ç –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- **–¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ**: –Ω–∏—á–µ–≥–æ –Ω–µ –º–µ–Ω—è–µ–º –≤ –≥–æ—Ä–æ–¥–µ, –Ω–µ —Ç—Ä–æ–≥–∞–µ–º TM:PE/RICO.
    
- **–ë–µ–∑ —Ç–∞–±–ª–∏—Ü/—ç–∫—Å–ø–æ—Ä—Ç–∞**: —Ç–æ–ª—å–∫–æ –≤–∏–∑—É–∞–ª—å–Ω—ã–π —Å–ª–æ–π (–æ–≤–µ—Ä–ª–µ–π) + –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª—ã.
    
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ø–µ—Ä–µ—Å—á—ë—Ç –Ω–µ —á–∞—â–µ, —á–µ–º 1 —Ä–∞–∑ –≤ 5‚Äì10 –∏–≥—Ä–æ–≤—ã—Ö —Å–µ–∫—É–Ω–¥; –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –±–µ–∑ –ø—Ä–æ—Å–∞–¥–æ–∫ FPS –Ω–∞ —Å—Ä–µ–¥–Ω–∏—Ö/–∫—Ä—É–ø–Ω—ã—Ö –≥–æ—Ä–æ–¥–∞—Ö.
    

---

## 2) –†–µ–∂–∏–º—ã –∏ UI

### –†–µ–∂–∏–º—ã

- **Hex**: –≥–µ–∫—Å–∞–≥–æ–Ω–∞–ª—å–Ω–∞—è —Å–µ—Ç–∫–∞, –º–∞—Å—à—Ç–∞–± ‚Äî –ø—Ä–µ—Å–µ—Ç—ã¬†**64 / 128 / 256 / 512**¬†(—Ç—Ä–∞–∫—Ç—É–µ–º –∫–∞–∫ ~–¥–∏–∞–º–µ—Ç—Ä –≥–µ–∫—Å–∞ –≤ –∏–≥—Ä–æ–≤—ã—Ö –º–µ—Ç—Ä–∞—Ö; –≤ UI –ø–æ–∫–∞–∑—ã–≤–∞–µ–º ¬´Hex size: 64m, 128m‚Ä¶¬ª).
    
- **Districts**: –∞–≥—Ä–µ–≥–∞—Ü–∏—è –ø–æ —Ä–∞–π–æ–Ω–∞–º (DistrictManager). –ü—Ä–∏ —ç—Ç–æ–º –∫–æ–Ω—Ç—Ä–æ–ª ¬´Hex size¬ª —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è/disabled.
    

### UI-–∫–æ–Ω—Ç—Ä–æ–ª—ã (–ø–∞–Ω–µ–ª—å –µ—Å—Ç—å)

- Dropdown¬†**Mode**:¬†`Hex | Districts`.
    
- Dropdown¬†**Hex size**:¬†`64 / 128 / 256 / 512`¬†(–∞–∫—Ç–∏–≤–µ–Ω —Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ Hex).
    
- Slider¬†**Opacity**:¬†`0.1 ‚Ä¶ 0.8`.
    
- –ù–µ–±–æ–ª—å—à–∞—è¬†**Legend**: ¬´–ö—Ä–∞—Å–Ω—ã–π ‚Äî –Ω—É–∂–Ω—ã jobs; –°–∏–Ω–∏–π ‚Äî –Ω—É–∂–Ω–æ housing¬ª.
    

---

## 3) –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö –∏ –∫–ª—é—á–µ–≤—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è

- –ë–µ—Ä—ë–º¬†**—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ**¬†–∑–Ω–∞—á–µ–Ω–∏—è:
    
    - **Residents**¬†‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∞–ª—å–Ω–æ –∂–∏–≤—É—â–∏—Ö –≥—Ä–∞–∂–¥–∞–Ω –≤ –∂–∏–ª–æ–º –∑–¥–∞–Ω–∏–∏ (—Å—É–º–º–∞ –ø–æ¬†_CitizenUnits_¬†—Å —Ñ–ª–∞–≥–æ–º¬†**Home**).
        
    - **Jobs**¬†‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∞–ª—å–Ω–æ¬†**–∑–∞–Ω—è—Ç—ã—Ö**¬†—Ä–∞–±–æ—Ç–Ω–∏–∫–æ–≤ (—Å—É–º–º–∞ –ø–æ¬†_CitizenUnits_¬†—Å —Ñ–ª–∞–≥–æ–º¬†**Work**) –≤ –Ω–µ–∂–∏–ª—ã—Ö –∑–¥–∞–Ω–∏—è—Ö: –∫–æ–º–º–µ—Ä—Ü–∏—è/–æ—Ñ–∏—Å—ã/–∏–Ω–¥—É—Å—Ç—Ä–∏—è/—Å–µ—Ä–≤–∏—Å—ã.
        
- **Balance (diff)**¬†=¬†`jobs ‚àí residents`:
    
    - `diff > 0`¬†(—Å–∏–Ω–∏–π): —Ä–∞–±–æ—á–∏—Ö –º–µ—Å—Ç –±–æ–ª—å—à–µ ‚Äî¬†**–Ω—É–∂–Ω–æ –∂–∏–ª—å—ë**;
        
    - `diff < 0`¬†(–∫—Ä–∞—Å–Ω—ã–π): –∂–∏–ª—å—Ü–æ–≤ –±–æ–ª—å—à–µ ‚Äî¬†**–Ω—É–∂–Ω—ã —Ä–∞–±–æ—á–∏–µ –º–µ—Å—Ç–∞**.
        

> –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å —Å¬†**Realistic Population**: –º–æ–¥ –º–µ–Ω—è–µ—Ç —ë–º–∫–æ—Å—Ç—å –∑–¥–∞–Ω–∏–π, –Ω–æ –º—ã —Å—á–∏—Ç–∞–µ–º¬†**—Ñ–∞–∫—Ç**¬†(–∫—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –∂–∏–≤—ë—Ç/—Ä–∞–±–æ—Ç–∞–µ—Ç), –ø–æ—ç—Ç–æ–º—É –º–µ—Ç—Ä–∏–∫–∞ —É—Å—Ç–æ–π—á–∏–≤–∞ –∏ –ø—Ä–∞–≤–¥–∏–≤–∞ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≥–æ—Ä–æ–¥–∞.

---

## 4) –ê–ª–≥–æ—Ä–∏—Ç–º—ã –∞–≥—Ä–µ–≥–∞—Ü–∏–∏

### 4.1 Hex grid (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è pointy-top)

- –°–µ—Ç–∫–∞:¬†**pointy-top**¬†–≥–µ–∫—Å—ã —Å –¥–∏–∞–º–µ—Ç—Ä–æ–º¬†`size`¬†(64/128/256/512 –º), —Ä–∞–¥–∏—É—Å¬†`r = size / 2`.
    
- –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –º–∏—Ä–∞¬†`(x, z)`¬†‚Üí¬†**–∞–∫—Å–∏–∞–ª—å–Ω—ã–µ**¬†–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≥–µ–∫—Å–∞¬†`(q, r)`:
    
    - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ñ–æ—Ä–º—É–ª—ã +¬†**cube rounding**¬†–¥–æ –±–ª–∏–∂–∞–π—à–µ–≥–æ –≥–µ–∫—Å–∞.
        
- –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:¬†`Map<(q,r)> ‚Üí (residentsSum, jobsSum)`.
    
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è:¬†`maxAbs = max(|jobs ‚àí residents|)`¬†–ø–æ –≤—Å–µ–º –≤–∏–¥–∏–º—ã–º —è—á–µ–π–∫–∞–º —Ç–µ–∫—É—â–µ–π —Å–µ—Ç–∫–∏.
    
- –¶–≤–µ—Ç: –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å¬†`t = clamp(|diff| / maxAbs)`, –∞–ª—å—Ñ–∞ =¬†`Opacity * t`.
    
    - `diff < 0`¬†‚Üí –∫—Ä–∞—Å–Ω—ã–π;¬†`diff > 0`¬†‚Üí —Å–∏–Ω–∏–π;¬†`diff = 0`¬†‚Üí –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π/–Ω–µ —Ä–∏—Å—É–µ–º.
        

### 4.2 Districts

- –ö–ª—é—á ‚Äî¬†`districtId`¬†(byte).
    
- –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: —Å—É–º–º–∏—Ä—É–µ–º¬†`residents/jobs`¬†–ø–æ –≤—Å–µ–º –∑–¥–∞–Ω–∏—è–º –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Ä–∞–π–æ–Ω–∞.
    
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∏ –æ–∫—Ä–∞—Å–∫–∞ ‚Äî —Ç–µ –∂–µ, —á—Ç–æ –¥–ª—è Hex (–ø–æ —Å–æ–≤–æ–∫—É–ø–Ω–æ—Å—Ç–∏ —Ä–∞–π–æ–Ω–æ–≤).
    

---

## 5) –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è (–æ–≤–µ—Ä–ª–µ–π)

- –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –∑–∞–ª–∏–≤–æ–∫ –≥–µ–∫—Å–æ–≤/—Ä–∞–π–æ–Ω–æ–≤¬†**–ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º**¬†—Ü–≤–µ—Ç–æ–º.
    
- –ü–æ—Ä—è–¥–æ–∫ —Ä–∏—Å–æ–≤–∞–Ω–∏—è ‚Äî –æ–¥–Ω–∏–º ¬´—Å–ª–æ–µ–º¬ª, –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–∑–æ–≤–æ–≤ (–±–∞—Ç—á–∏–Ω–≥).
    
- **Tooltip –ø–æ–¥ –∫—É—Ä—Å–æ—Ä–æ–º**¬†(–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å¬†`diff`¬†–∏ –∫–æ—Ä–æ—Ç–∫—É—é –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—é:
    
    - `+120`¬†‚Üí ¬´–∏–∑–±—ã—Ç–æ–∫ —Ä–∞–±–æ—á–∏—Ö –º–µ—Å—Ç (–Ω—É–∂–Ω–æ –∂–∏–ª—å—ë)¬ª;
        
    - `‚Äì85`¬†‚Üí ¬´–∏–∑–±—ã—Ç–æ–∫ –∂–∏–ª—å—Ü–æ–≤ (–Ω—É–∂–Ω—ã jobs)¬ª.
        

---

## 6) –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

- **–ò–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ—Å—á—ë—Ç**: –∫–∞–∂–¥—ã–µ¬†**5‚Äì10 –∏–≥—Ä–æ–≤—ã—Ö —Å–µ–∫—É–Ω–¥**.
    
- **–¢—Ä–∏–≥–≥–µ—Ä—ã –ø–µ—Ä–µ—Å—á—ë—Ç–∞ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã)**: –ø–æ—Å—Ç—Ä–æ–µ–Ω–æ/—Å–Ω–µ—Å–µ–Ω–æ –∑–¥–∞–Ω–∏–µ, —Å–º–µ–Ω–∞ —Ä–µ–∂–∏–º–∞/–º–∞—Å—à—Ç–∞–±–∞.
    
- **–ö—ç—à**:
    
    - –°–ø–∏—Å–æ–∫ ¬´—Å—ç–º–ø–ª–æ–≤¬ª –∑–¥–∞–Ω–∏–π (–ø–æ–∑–∏—Ü–∏—è, residents, jobs, district) ‚Äî –æ–±–Ω–æ–≤–ª—è—Ç—å –ø–æ —Ç—Ä–∏–≥–≥–µ—Ä–∞–º.
        
    - –î–ª—è¬†**Hex**¬†–∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞, –ø—Ä–∏ —Å–º–µ–Ω–µ —Ä–∞–∑–º–µ—Ä–∞ ‚Äî –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å.
        
    - –î–ª—è¬†**Districts**¬†‚Äî –ø–µ—Ä–µ—Å—á—ë—Ç —Ç–æ–ª—å–∫–æ –ø–æ —Ç—Ä–∏–≥–≥–µ—Ä–∞–º/–∏–Ω—Ç–µ—Ä–≤–∞–ª—É.
        

---

## 7) –ü—Ä–∞–≤–∏–ª–∞ –∏ —Ç–æ–Ω–∫–æ—Å—Ç–∏ (—Å—Ä–∞–∑—É –∑–∞–ª–æ–∂–∏—Ç—å)

1. **–§–∞–∫—Ç vs —ë–º–∫–æ—Å—Ç—å**  
    –í MVP —Å—á–∏—Ç–∞–µ–º¬†**—Ñ–∞–∫—Ç**¬†(Home/Work). –≠—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–ª–æ–π –ø–æ–ª–µ–∑–Ω—ã–º ¬´–∑–¥–µ—Å—å –∏ —Å–µ–π—á–∞—Å¬ª. –ü–æ–∑–∂–µ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤—Ç–æ—Ä–æ–π —Ä–µ–∂–∏–º ¬´capacity¬ª, –Ω–æ —Å–µ–π—á–∞—Å –Ω–µ –Ω—É–∂–µ–Ω.
    
2. **–ü—É—Å—Ç—ã–µ —è—á–µ–π–∫–∏/—Ä–∞–π–æ–Ω—ã**  
    –ù–∏—á–µ–≥–æ –Ω–µ —Ä–∏—Å—É–µ–º (–∏–ª–∏ —Ä–∏—Å—É–µ–º –æ—á–µ–Ω—å —Å–ª–∞–±—É—é –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—É—é –ø–æ–¥–ª–æ–∂–∫—É ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ).
    
3. **–®—É–º—ã –æ—Ç –æ–¥–∏–Ω–æ—á–Ω—ã—Ö –≥–∏–≥–∞–Ω—Ç–æ–≤**  
    –≠—Ç–æ —Ç–æ–∂–µ –ø—Ä–∏–∑–Ω–∞–∫ –¥–∏—Å–±–∞–ª–∞–Ω—Å–∞ (–∫—Ä—É–ø–Ω–∞—è –∏–Ω–¥—É—Å—Ç—Ä–∏—è –±–µ–∑ –∂–∏–ª—å—Ü–æ–≤ —Ä—è–¥–æ–º) ‚Äî –æ—Å—Ç–∞–≤–ª—è–µ–º, –∫–∞–∫ –µ—Å—Ç—å. –ü–æ–∑–∂–µ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ (median/kernel) –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–π–∫—É.
    
4. **–í–æ–¥–∞/–Ω–µ–∑–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∑–æ–Ω—ã**  
    –ò–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è (–Ω–µ—Ç –∑–¥–∞–Ω–∏–π ‚Äî –Ω–µ—Ç –≤–∫–ª–∞–¥–∞ –≤ —Å—É–º–º—É).
    
5. **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ü–≤–µ—Ç–∞**  
    –ù–∞¬†**–∫–∞–∂–¥—ã–π –∫–∞–¥—Ä**¬†–±—Ä–∞—Ç—å¬†`maxAbs`¬†–¥–ª—è¬†**—Ç–µ–∫—É—â–µ–≥–æ**¬†—Ä–µ–∂–∏–º–∞ –∏ –º–∞—Å—à—Ç–∞–±–∞. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –≤–∏–∑—É–∞–ª —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è—Ö.
    
6. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**  
    ‚Äî –Ω–µ —á–∞—â–µ 1 –ø–µ—Ä–µ—Å—á—ë—Ç–∞ –≤ 5‚Äì10 —Å;  
    ‚Äî –æ—Ç—Ä–∏—Å–æ–≤–∫—É –¥–µ–ª–∞—Ç—å –æ–¥–Ω–æ–π –ø—Ä–æ—Ö–æ–¥–∫–æ–π;  
    ‚Äî –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å —á–∏—Å–ª–æ –≥–µ–∫—Å–æ–≤ (–∫—Ä—É–ø–Ω—ã–µ –≥–æ—Ä–æ–¥–∞ ‚Üí –ø—Ä–µ–¥–ø–æ—á–µ—Å—Ç—å —Ä–∞–∑–º–µ—Ä ‚â•128 –º –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ FPS).
    
7. **UX-—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å**  
    –ü—Ä–∏ —Å–º–µ–Ω–µ —Ä–µ–∂–∏–º–∞/–º–∞—Å—à—Ç–∞–±–∞ ‚Äî –≤–∏–∑—É–∞–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ø–æ–ª–æ–∂–µ–Ω–∏–µ –ø–∞–Ω–µ–ª–∏/–∏–∫–æ–Ω–∫–∏; –Ω–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—Ç—å –≤–∞–∂–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–≥—Ä—ã (z-order).
    
8. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**  
    ‚Äî¬†**Realistic Population**: —Ä–∞–±–æ—Ç–∞–µ—Ç ¬´–∫–∞–∫ –µ—Å—Ç—å¬ª (–º—ã —Å—á–∏—Ç–∞–µ–º —Ñ–∞–∫—Ç).  
    ‚Äî¬†**TM:PE/RICO**: –Ω–µ —á–∏—Ç–∞–µ–º/–Ω–µ –ø–∏—à–µ–º –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è (–¥–ª—è MVP —ç—Ç–æ –Ω–µ –Ω—É–∂–Ω–æ).  
    ‚Äî –ù–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å Harmony-–ø–∞—Ç—á–∏ –¥–ª—è —ç—Ç–æ–π —Ñ–∏—á–∏ (MVP –Ω–µ —Ç—Ä–µ–±—É–µ—Ç).
    

---

## 8) –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω (high-level, –±–µ–∑ –∫–æ–¥–∞)

### –≠—Ç–∞–ø A ‚Äî –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –∫–æ–Ω—Ç—É—Ä—ã

1. **–î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∂–∏–º—ã –∏ –∫–æ–Ω—Ç—Ä–æ–ª—ã**¬†–≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ø–∞–Ω–µ–ª—å: Mode, Hex size, Opacity, Legend.
    
2. **–ó–∞–≤–µ—Å—Ç–∏ —Ñ–ª–∞–≥–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è**:¬†`currentMode`,¬†`currentHexSize`,¬†`opacity`.
    
3. **–°–∫–µ–ª–µ—Ç –æ–≤–µ—Ä–ª–µ—è**: –ø—É—Å—Ç–æ–π —Å–ª–æ–π, –∫–æ—Ç–æ—Ä—ã–π —É–º–µ–µ—Ç –≤–∫–ª—é—á–∞—Ç—å—Å—è/–≤—ã–∫–ª—é—á–∞—Ç—å—Å—è –∏ –º–µ–Ω—è—Ç—å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å.
    

### –≠—Ç–∞–ø B ‚Äî –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö (—Ñ–∞–∫—Ç)

4. **–ò—Ç–µ—Ä–∞—Ü–∏—è –ø–æ –∑–¥–∞–Ω–∏—è–º**¬†‚Üí —Å–æ–±—Ä–∞—Ç—å —Å–ø–∏—Å–æ–∫ ¬´—Å—ç–º–ø–ª–æ–≤¬ª: –ø–æ–∑–∏—Ü–∏—è, districtId,¬†`residentsFact`,¬†`jobsFact`.
    
    - `residentsFact`: —Å—É–º–º–∏—Ä–æ–≤–∞—Ç—å –≥—Ä–∞–∂–¥–∞–Ω –≤¬†_CitizenUnits_¬†—Å —Ñ–ª–∞–≥–æ–º¬†**Home**;
        
    - `jobsFact`: —Å—É–º–º–∏—Ä–æ–≤–∞—Ç—å –≥—Ä–∞–∂–¥–∞–Ω –≤¬†_CitizenUnits_¬†—Å —Ñ–ª–∞–≥–æ–º¬†**Work**;
        
    - –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –∑–¥–∞–Ω–∏—è –±–µ–∑ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —Ñ–ª–∞–≥–∞/–±–µ–∑ Info/–±–µ–∑ —é–Ω–∏—Ç–æ–≤.
        
5. **–ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫**; –¥–æ–±–∞–≤–∏—Ç—å ¬´–≥—Ä—è–∑–Ω—ã–π¬ª —Ñ–ª–∞–≥ –¥–ª—è –ø–µ—Ä–µ—Å—á—ë—Ç–∞ –ø—Ä–∏ —Ç—Ä–∏–≥–≥–µ—Ä–∞—Ö.

### –≠—Ç–∞–ø B 2.0 - –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ —ç—Ç–∞–ø—É B ([[#–≠—Ç–∞–ø B - –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö (—Ñ–∞–∫—Ç)]])

–°–º–æ—Ç—Ä–µ—Ç—å [[–≠—Ç–∞–ø B 2.0#general info]]

### –≠—Ç–∞–ø C ‚Äî –ê–≥—Ä–µ–≥–∞—Ü–∏—è

6. **Hex Aggregator**
    
    - –ù–∞ –≤—Ö–æ–¥: —Å–ø–∏—Å–æ–∫ —Å—ç–º–ø–ª–æ–≤ +¬†`hexSize`.
        
    - –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—ç–º–ø–ª–∞ ‚Üí –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≥–µ–∫—Å¬†`(q,r)`¬†(–∞–∫—Å–∏–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, rounding) ‚Üí —Å—É–º–º–∏—Ä–æ–≤–∞—Ç—å¬†`residents/jobs`.
        
    - –ü–æ—Å—á–∏—Ç–∞—Ç—å¬†`maxAbs`¬†–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –º–∞—Å—Å–∏–≤/—Å–ª–æ–≤–∞—Ä—å –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∞.
        
7. **Districts Aggregator**
    
    - –ù–∞ –≤—Ö–æ–¥: —Å–ø–∏—Å–æ–∫ —Å—ç–º–ø–ª–æ–≤.
        
    - –°—É–º–º–∏—Ä–æ–≤–∞—Ç—å¬†`residents/jobs`¬†–ø–æ¬†`districtId`.
        
    - –ü–æ—Å—á–∏—Ç–∞—Ç—å¬†`maxAbs`¬†–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∞.
        

### –≠—Ç–∞–ø D ‚Äî –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

8. **Hex Render**
    
    - –î–ª—è –∫–∞–∂–¥–æ–π —è—á–µ–π–∫–∏ —Å –Ω–µ–Ω—É–ª–µ–≤—ã–º¬†`diff`¬†‚Üí —Ü–≤–µ—Ç –ø–æ –ø—Ä–∞–≤–∏–ª—É; –Ω–∞—Ä–∏—Å–æ–≤–∞—Ç—å –≥–µ–∫—Å (–∑–∞–ª–∏–≤–∫–∞) —Å –∞–ª—å—Ñ–æ–π¬†`opacity * t`.
        
9. **Districts Render**
    
    - –í–∞—Ä–∏–∞–Ω—Ç MVP: —Ä–∏—Å–æ–≤–∞—Ç—å¬†**—Ü–µ–Ω—Ç—Ä–æ–∏–¥/–∑–∞–ª–∏–≤–∫—É —É–ø—Ä–æ—â—ë–Ω–Ω–æ–π —Ñ–æ—Ä–º–æ–π**¬†(–¥–æ–ø—É—Å—Ç–∏–º–æ) –∏–ª–∏ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–∏–π –ø–æ–ª–∏–≥–æ–Ω; –≤–∞–∂–Ω–æ ‚Äî —Å–æ–±–ª—é—Å—Ç–∏ —Ü–≤–µ—Ç/–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å.
        
    - Tooltip (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å¬†`diff`.
        
10. **Legend**
    

- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –±–ª–æ–∫ –≤ –ø–∞–Ω–µ–ª–∏: ¬´–ö—Ä–∞—Å–Ω—ã–π ‚Äî –Ω—É–∂–Ω—ã jobs; –°–∏–Ω–∏–π ‚Äî –Ω—É–∂–Ω–æ housing¬ª.
    
- –û—Ç–¥–µ–ª—å–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å¬†`Hex size`¬†–∏ —Ç–µ–∫—É—â—É—é —à–∫–∞–ª—É –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏ (—Ç–µ–∫—Å—Ç–æ–º).
    

### –≠—Ç–∞–ø E ‚Äî –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ/–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

11. **–¢–∞–π–º–µ—Ä –ø–µ—Ä–µ—Å—á—ë—Ç–∞**¬†(5‚Äì10 –∏–≥—Ä–æ–≤—ã—Ö —Å–µ–∫—É–Ω–¥).
    
12. **–¢—Ä–∏–≥–≥–µ—Ä—ã**: —Å–º–µ–Ω–∞ —Ä–µ–∂–∏–º–∞/–º–∞—Å—à—Ç–∞–±–∞, –ø–æ—Å—Ç—Ä–æ–µ–Ω–æ/—Å–Ω–µ—Å–µ–Ω–æ –∑–¥–∞–Ω–∏–µ (–µ—Å–ª–∏ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ –ø—Ä–æ—Å—Ç–æ).
    
13. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**:
    
    - –ø—Ä–∏ —Å–º–µ–Ω–µ¬†**—Ç–æ–ª—å–∫–æ**¬†opacity ‚Äî¬†**–Ω–µ**¬†–ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å –∞–≥—Ä–µ–≥–∞—Ü–∏—é;
        
    - –ø—Ä–∏ —Å–º–µ–Ω–µ¬†**hex size**¬†‚Äî –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å¬†**—Ç–æ–ª—å–∫–æ**¬†Hex Aggregator;
        
    - –ø—Ä–∏ —Å–º–µ–Ω–µ¬†**mode**¬†‚Äî –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö (district vs hex), –±–µ–∑ –Ω–æ–≤–æ–≥–æ –æ–±—Ö–æ–¥–∞ –∑–¥–∞–Ω–∏–π.
        

### –≠—Ç–∞–ø F ‚Äî –ü–æ–ª–∏—Ä–æ–≤–∫–∞ UX

14. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ UI-–Ω–∞—Å—Ç—Ä–æ–µ–∫**¬†(mode, hex size, opacity) –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏ (–ø—Ä–æ—Å—Ç—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏).
    
15. **–í–∏–∑—É–∞–ª—å–Ω—ã–µ –º–µ–ª–æ—á–∏**: –∞–∫–∫—É—Ä–∞—Ç–Ω–∞—è —Ä–∞–º–∫–∞ –ø–∞–Ω–µ–ª–∏, –Ω–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—Ç—å –≤–∞–Ω–∏–ª—å–Ω—ã–µ –ø–∞–Ω–µ–ª–∏, –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π z-order.
    

---

## 9) –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ (Acceptance)

- ¬†–†–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –æ–≤–µ—Ä–ª–µ–π¬†**Hex/Districts**¬†—Å –æ–∂–∏–¥–∞–µ–º–æ–π –ª–æ–≥–∏–∫–æ–π —Ü–≤–µ—Ç–æ–≤.
    
- ¬†–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ¬†`Hex size (64/128/256/512)`¬†–º–≥–Ω–æ–≤–µ–Ω–Ω–æ –º–µ–Ω—è–µ—Ç –∫–∞—Ä—Ç–∏–Ω—É, –±–µ–∑ –ø–∞–¥–µ–Ω–∏–π FPS.
    
- ¬†–ü–µ—Ä–µ—Å—á—ë—Ç –∏–¥—ë—Ç –ø–æ¬†**—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–º**¬†–¥–∞–Ω–Ω—ã–º (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤—ã–±–æ—Ä–æ—á–Ω–æ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–¥–∞–Ω–∏—è—Ö).
    
- ¬†–†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º¬†**Realistic Population**.
    
- ¬†–ü–µ—Ä–µ—Å—á—ë—Ç –Ω–µ —á–∞—â–µ 1 —Ä–∞–∑–∞/5‚Äì10 —Å, FPS —Å—Ç–∞–±–∏–ª–µ–Ω –≤ —Ç–∏–ø–∏—á–Ω–æ–º –≥–æ—Ä–æ–¥–µ.
    
- ¬†–ù–∞—Å—Ç—Ä–æ–π–∫–∏ (mode/size/opacity) –∑–∞–ø–æ–º–∏–Ω–∞—é—Ç—Å—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è.
    

---

## 10) –¢–µ—Å—Ç-–ø–ª–∞–Ω (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π)

1. **–ü—Ä–æ—Å—Ç–æ–π –∫–µ–π—Å**: –æ–¥–∏–Ω –∂–∏–ª–æ–π –∫–≤–∞—Ä—Ç–∞–ª + –æ–¥–Ω–∞ –∏–Ω–¥—É—Å—Ç—Ä–∏—è. Hex 128 ‚Üí —Å–ø–∞–ª—å–Ω–∏–∫ –∫—Ä–∞—Å–Ω—ã–π, –∏–Ω–¥—É—Å—Ç—Ä–∏—è —Å–∏–Ω—è—è.
    
2. **–°–º–µ–Ω–∞ –º–∞—Å—à—Ç–∞–±–∞**: 64 ‚Üî 256 ‚Äî –∫–∞—Ä—Ç–∏–Ω–∞ –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç—Å—è, –Ω–æ ¬´–æ–±—â–∏–π —Ä–∏—Å—É–Ω–æ–∫¬ª —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è.
    
3. **Districts**: —Å—É–º–º–∞—Ä–Ω—ã–π —Ü–≤–µ—Ç —Ä–∞–π–æ–Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç ¬´—Å—Ä–µ–¥–Ω–µ–º—É¬ª –ø–æ –≤—Ö–æ–¥—è—â–∏–º –≥–µ–∫—Å–∞–º.
    
4. **Realistic Population**: –∏–∑–º–µ–Ω–µ–Ω–∏–µ —ë–º–∫–æ—Å—Ç–µ–π –Ω–µ –ª–æ–º–∞–µ—Ç –∫–∞—Ä—Ç–∏–Ω—É (—Å—á—ë—Ç –∏–¥—ë—Ç –ø–æ —Ñ–∞–∫—Ç—É).
    
5. **–ù–∞–≥—Ä—É–∑–∫–∞**: –±–æ–ª—å—à–æ–π –≥–æ—Ä–æ–¥ ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ Hex size –Ω–µ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –∑–∞–º–µ—Ç–Ω—ã–º –ø—Ä–æ—Å–∞–¥–∫–∞–º.
    

---

## 11) –†–∏—Å–∫–∏ –∏ –∫–∞–∫ –∏—Ö —Å–Ω–∏–∑–∏—Ç—å

- **–ë–æ–ª—å—à–∞—è –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –≥–µ–∫—Å–æ–≤ (size=64) –≤ –æ–≥—Ä–æ–º–Ω–æ–º –≥–æ—Ä–æ–¥–µ**¬†‚Üí —Ä–∏—Å–∫ –ø—Ä–æ—Å–∞–¥–æ–∫:  
    ‚Üí –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã—Å—Ç–∞–≤–∏—Ç—å¬†**128**; –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—Ç—å, –µ—Å–ª–∏ size=64 –Ω–∞ –∫–∞—Ä—Ç–µ > X –≥–µ–∫—Å–æ–≤.
    
- **¬´–í—Å–ø—ã—à–∫–∏¬ª —Ü–≤–µ—Ç–æ–≤ –ø—Ä–∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏**¬†(maxAbs —Å–∏–ª—å–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è):  
    ‚Üí —Å–≥–ª–∞–¥–∏—Ç—å¬†`maxAbs`¬†—á–µ—Ä–µ–∑ —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —É—Å—Ä–µ–¥–Ω–µ–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤ MVP).
    
- **–°–ª–æ–∂–Ω—ã–µ –∫–æ–Ω—Ç—É—Ä—ã —Ä–∞–π–æ–Ω–æ–≤**¬†(Districts):  
    ‚Üí MVP: –ø—Ä–æ—Å—Ç–∞—è –∑–∞–ª–∏–≤–∫–∞/—Ü–µ–Ω—Ç—Ä–æ–∏–¥—ã; –ø–æ–∑–∂–µ ‚Äî –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–µ –ø–æ–ª–∏–≥–æ–Ω—ã –ø–æ –≥—Ä–∞–Ω–∏—Ü–∞–º.
    

---

## 12) –ß—Ç–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ—Å–ª–µ MVP (–Ω–æ –Ω–µ —Å–µ–π—á–∞—Å)

- –†–µ–∂–∏–º ¬´capacity¬ª (jobs_capacity ‚àí residents_capacity).
    
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø–∞–º –∑–æ–Ω (–ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤–∫–ª–∞–¥ R/C/O/I).
    
- –°–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ (median/kernel).
    
- –°–æ–≤–º–µ—â–µ–Ω–∏–µ —Å –∏–∑–æ—Ö—Ä–æ–Ω–∞–º–∏ (–æ–±—ä—è—Å–Ω–∏—Ç—å ¬´–ø–æ—á–µ–º—É –¥–∏—Å–±–∞–ª–∞–Ω—Å¬ª –≤—Ä–µ–º–µ–Ω–µ–º –¥–æ —Ä–∞–±–æ—Ç—ã/–û–¢).
    

---

–µ—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî –º–æ–≥—É —Å—Ä–∞–∑—É —Ä–∞–∑–º–µ—Ç–∏—Ç—å —ç—Ç–æ –Ω–∞ –∑–∞–¥–∞—á–∏ Jira/Linear —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ (A‚ÜíF), —á—Ç–æ–±—ã –¥—Ä—É–≥–æ–π –ò–ò –≤–∑—è–ª –∏ –ø—Ä–æ–≥–Ω–∞–ª —ç—Ç–∞–ø—ã –ø–æ –æ—á–µ—Ä–µ–¥–∏.